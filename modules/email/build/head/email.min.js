function Email(){var q=new Date,l=AnyBalance.requestGet("https://10minutemail.net/",addHeaders({})),g=getParam(l,null,null,/<input[^>]+id="fe_text"[^>]*value="([^"]*)/i);if(!g)throw AnyBalance.trace(l),new AnyBalance.Error("Не удалось получить временный e-mail!");var m;return{email:g,waitForEmails:function(n,r){var p={},g=(new Date).getTime();do{var a;a=AnyBalance.requestGet("https://10minutemail.net/mailbox.ajax.php?_="+(new Date).getTime(),addHeaders({Referer:"https://10minutemail.net/","X-Requested-With":"XMLHttpRequest"}));
if(!/<table[^>]+maillist/i.test(a))throw AnyBalance.trace(a),new AnyBalance.Error("Не удалось проверить е-мейл!");a=getElements(a,/<tr[^>]+onclick[^>]*>/ig);for(var e=[],c=0;c<a.length;++c){var f=a[c];if(!/mid=welcome/i.test(f)){var d=getParam(f,null,null,/<a[^>]+href="readmail[^>]*>([\s\S]*?)<\/a>/i,replaceTagsAndSpaces),b=getParam(f,null,null,/<a[^>]+href="readmail.html\?mid=([^"]*)/i),h=getParam(f,null,null,/<td[^>]*>([\s\S]*?)<\/td>/i,replaceTagsAndSpaces),f=getParam(f,null,null,/<span[^>]*title="(\d{4}[^"]*)/i,
replaceHtmlEntities,parseDateISO);e.push({name:d,id:b,from:h,time:f})}}a=e;for(e=0;e<a.length;++e){c=a[e];if(!p[c.id]){AnyBalance.trace("Получаем емейл от "+c.from+": "+c.name);b=c;AnyBalance.trace("Fetching email "+b.name+" from "+b.from);d=AnyBalance.requestGet("https://10minutemail.net/readmail.html?mid="+encodeURIComponent(b.id),addHeaders({Referer:"https://10minutemail.net/"}));b.text=getElement(d,/<div[^>]+id="tab3"[^>]*>/i,replaceTagsAndSpaces);b.text||(b.text=getElement(d,/<div[^>]+id="tab2"[^>]*>/i,
replaceTagsAndSpaces));b.html=getElement(d,/<div[^>]+id="tab1"[^>]*>/i);d=getElements(d,/<a[^>]+href="attachment[^>]*>/ig);AnyBalance.trace("Email "+b.name+" has "+d.length+" attachments");if(d.length)for(b=b.attachments=[],h=0;h<d.length;h++){var k=d[h],f=getParam(k,null,null,null,replaceTagsAndSpaces),k=getParam(k,null,null,/<a[^>]+href="([^"]*)/i);b.push({name:f,url:"https://10minutemail.net/"+k});AnyBalance.trace("Attachment found: "+f+": "+k)}p[c.id]=c;m&&m(c)}a[e]=p[c.id]}if(a.length>=n)return a;
e=(new Date).getTime();if(e-g>=(r||12E5))return AnyBalance.trace("Ждем емейл слишком долго, терпения больше нет, выходим."),a;57E4<=e-q.getTime()&&(AnyBalance.trace("Требуется продлить e-mail, продлеваем."),q=new Date,l=AnyBalance.requestGet("https://10minutemail.net/more.html",addHeaders({Referer:"https://10minutemail.net/"})));AnyBalance.sleep(1E4)}while(1)},fetchAttachment:function(n,g){return AnyBalance.requestGet(n,addHeaders({Referer:"https://10minutemail.net/"}),g)},setOnEmail:function(g){m=
g}}};
