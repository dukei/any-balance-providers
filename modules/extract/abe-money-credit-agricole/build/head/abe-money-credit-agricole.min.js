var g_headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","Accept-Charset":"windows-1251,utf-8;q=0.7,*;q=0.3","Accept-Language":"ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4",Connection:"keep-alive","User-Agent":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36"},baseurl="https://online.credit-agricole.ua/";
function login(){var b=AnyBalance.getPreferences();AnyBalance.setDefaultCharset("utf-8");checkEmpty(b.login,"Введите логин!");checkEmpty(b.password,"Введите пароль!");var a=AnyBalance.requestGet(baseurl+"uk",g_headers);if(!a||400<AnyBalance.getLastStatusCode())throw AnyBalance.trace(a),new AnyBalance.Error("Ошибка при подключении к сайту интернет-банка! Попробуйте обновить данные позже.");if(/logout/i.test(a))AnyBalance.trace("Уже залогинены, используем существующую сессию");else var c=createFormParams(a,
function(c,e,f,g){if("login"==f)return b.login;if("password"==f)return b.password;if("captcha"==f){c=getParam(a,null,null,/<input[^>]+captchaHash[^>]+value="([^"]*)/i);if(!c)throw AnyBalance.trace(a),new AnyBalance.Error("Не удалось найти ссылку на капчу.");c=AnyBalance.requestGet(baseurl+"assets/captcha/"+c,addHeaders({Referer:baseurl+"uk/security/logon"}));return AnyBalance.retrieveCode("Пожалуйста, введите код с картинки",c,{time:18E4})}return g}),a=AnyBalance.requestPost(baseurl+"uk/security/logon",
c,addHeaders({Referer:baseurl+"uk/security/logon"}));if(!/logout/i.test(a)){if(c=getParam(a,null,null,[/<div[^>]+buttons-info[^>]*>([\s\S]*?)<\/div>/i,/<div[^>]+pageerror[^>]*>([\s\S]*?)<\/div>/i],replaceTagsAndSpaces))throw new AnyBalance.Error(c,null,/(Недійсний логін чи пароль|Неправильний код з малюнку)/i.test(c));AnyBalance.trace(a);throw new AnyBalance.Error("Не удалось зайти в интернет-банк. Сайт изменен?");}__setLoginSuccessful();return a}
function processAccounts(b,a){throw new AnyBalance.Error("Обработка счетов пока не поддерживается. Пожалуйста, обратитесь к разработчикам.");}
function processCards(b,a){if(AnyBalance.isAvailable("cards")){b=AnyBalance.requestGet(baseurl+"uk/cards/allcards?nc="+(new Date).getTime(),addHeaders({"X-Requested-With":"XMLHttpRequest",Referer:baseurl+"uk"}));var c=getJson(b);if(c.length){AnyBalance.trace("Найдено карт: "+c.length);a.cards=[];for(var d=0;d<c.length;++d){var e={__id:c[d].CardNumber,__name:c[d].CardName,num:c[d].CardNumber};__shouldProcess("cards",e)&&processCard(c[d],e);a.cards.push(e)}}else AnyBalance.trace(b),AnyBalance.trace("Карты не найдены.")}}
function processCard(b,a){AnyBalance.trace("Обработка карты "+a.__name);getParam(parseBalance(b.Balance||0)/100,a,"cards.balance");getParam(.1*parseBalance(b.InterestRate||0),a,"cards.pct");getParam(b.Currency,a,"cards.currency");getParam(b.CardSubType,a,"cards.type");getParam(b.AgreementNumber,a,"cards.agreement");getParam(b.RelatedAccount,a,"cards.accnum");getParam(b.EmbossedName,a,"cards.holder");getParam(b.AgreementDate,a,"cards.agreement_date",null,null,parseDateISO);getParam(b.ExpirationDate,
a,"cards.till",null,null,parseDateISO);a.status=0==b.Status?"Активна":"Неактивна";isAvailable("cards.transactions")&&processCardTransactions(b,a)}
function processDeposits(b,a){if(AnyBalance.isAvailable("deposits")){b=AnyBalance.requestGet(baseurl+"uk/deposits/isc/data?nc="+(new Date).getTime(),addHeaders({"X-Requested-With":"XMLHttpRequest",Referer:baseurl+"uk"}));var c=getJson(b);if(c.length){AnyBalance.trace("Найдено депозитов: "+c.length);a.deposits=[];for(var d=0;d<c.length;++d){var e={__id:c[d].AccountNumber,__name:c[d].AccountNumber,num:c[d].Agreement};__shouldProcess("deposits",e)&&processDeposit(c[d],e);a.deposits.push(e)}}else AnyBalance.trace(b),
AnyBalance.trace("Депозиты не найдены.")}}
function processDeposit(b,a){AnyBalance.trace("Обработка депозита "+a.__name);getParam(parseBalance(b.Amount||0)/100,a,"deposits.amount");getParam(parseBalance(b.Balance||0)/100,a,"deposits.balance");getParam(.1*parseBalance(b.InterestRate||0),a,"deposits.pct");getParam(b.Currency,a,"deposits.currency");getParam(b.ContractId,a,"deposits.contract_id");getParam(parseDateISO(b.FromDate),a,"deposits.date_start");getParam(b.Withdrawal,a,"deposits.withdraw");getParam(b.Replenishment,a,"deposits.topup")}
function processCredits(b,a){throw new AnyBalance.Error("Обработка кредитов пока не поддерживается. Пожалуйста, обратитесь к разработчикам.");}
function processInfo(b,a){b=AnyBalance.requestGet(baseurl+"uk/user?nc="+(new Date).getTime(),addHeaders({"X-Requested-With":"XMLHttpRequest",Referer:baseurl+"uk"}));var c=a.info={};getParam(b,c,"info.fio",/Повне(?:[^>]*>){2}([^<]*)/i,replaceTagsAndSpaces);getParam(b,c,"info.mphone",/Мобільний телефон(?:[^>]*>){2}([^<]*)/i,replaceHtmlEntities);getParam(b,c,"info.email",/email:ko(?:[^\(]*\()([^\)]*)/i,[replaceHtmlEntities,/'/g,""])};
