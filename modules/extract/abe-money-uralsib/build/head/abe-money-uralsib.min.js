(function(a){a.navigator={appName:"Netscape",appVersion:"5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.93 Safari/537.36"};a.window={}})(this);var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(canary&16777215);function BigInteger(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function nbi(){return new BigInteger(null)}function am1(a,b,c,d,e,f){for(;0<=--f;){var h=b*this[a++]+c[d]+e;e=Math.floor(h/67108864);c[d++]=h&67108863}return e}
function am2(a,b,c,d,e,f){var h=b&32767;for(b>>=15;0<=--f;){var p=this[a]&32767,q=this[a++]>>15,g=b*p+q*h,p=h*p+((g&32767)<<15)+c[d]+(e&1073741823);e=(p>>>30)+(g>>>15)+b*q+(e>>>30);c[d++]=p&1073741823}return e}function am3(a,b,c,d,e,f){var h=b&16383;for(b>>=14;0<=--f;){var p=this[a]&16383,q=this[a++]>>14,g=b*p+q*h,p=h*p+((g&16383)<<14)+c[d]+e;e=(p>>28)+(g>>14)+b*q;c[d++]=p&268435455}return e}
j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28);BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=[],rr,vv;
rr=48;for(vv=0;9>=vv;++vv)BI_RC[rr++]=vv;rr=97;for(vv=10;36>vv;++vv)BI_RC[rr++]=vv;rr=65;for(vv=10;36>vv;++vv)BI_RC[rr++]=vv;function int2char(a){return BI_RM.charAt(a)}function intAt(a,b){var c=BI_RC[a.charCodeAt(b)];return null==c?-1:c}function bnpCopyTo(a){for(var b=this.t-1;0<=b;--b)a[b]=this[b];a.t=this.t;a.s=this.s}function bnpFromInt(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0}function nbv(a){var b=nbi();b.fromInt(a);return b}
function bnpFromString(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else if(4==b)c=2;else{this.fromRadix(a,b);return}this.s=this.t=0;for(var d=a.length,e=!1,f=0;0<=--d;){var h=8==c?a[d]&255:intAt(a,d);0>h?"-"==a.charAt(d)&&(e=!0):(e=!1,0==f?this[this.t++]=h:f+c>this.DB?(this[this.t-1]|=(h&(1<<this.DB-f)-1)<<f,this[this.t++]=h>>this.DB-f):this[this.t-1]|=h<<f,f+=c,f>=this.DB&&(f-=this.DB))}8==c&&0!=(a[0]&128)&&(this.s=-1,0<f&&(this[this.t-1]|=(1<<this.DB-
f)-1<<f));this.clamp();e&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var a=this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t}
function bnToString(a){if(0>this.s)return"-"+this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var b=(1<<a)-1,c,d=!1,e="",f=this.t,h=this.DB-f*this.DB%a;if(0<f--)for(h<this.DB&&0<(c=this[f]>>h)&&(d=!0,e=int2char(c));0<=f;)h<a?(c=(this[f]&(1<<h)-1)<<a-h,c|=this[--f]>>(h+=this.DB-a)):(c=this[f]>>(h-=a)&b,0>=h&&(h+=this.DB,--f)),0<c&&(d=!0),d&&(e+=int2char(c));return d?e:"0"}
function bnNegate(){var a=nbi();BigInteger.ZERO.subTo(this,a);return a}function bnAbs(){return 0>this.s?this.negate():this}function bnCompareTo(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t,b=c-a.t;if(0!=b)return b;for(;0<=--c;)if(0!=(b=this[c]-a[c]))return b;return 0}function nbits(a){var b=1,c;0!=(c=a>>>16)&&(a=c,b+=16);0!=(c=a>>8)&&(a=c,b+=8);0!=(c=a>>4)&&(a=c,b+=4);0!=(c=a>>2)&&(a=c,b+=2);0!=a>>1&&(b+=1);return b}
function bnBitLength(){return 0>=this.t?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(a,b){var c;for(c=this.t-1;0<=c;--c)b[c+a]=this[c];for(c=a-1;0<=c;--c)b[c]=0;b.t=this.t+a;b.s=this.s}function bnpDRShiftTo(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0);b.s=this.s}
function bnpLShiftTo(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,f=Math.floor(a/this.DB),h=this.s<<c&this.DM,p;for(p=this.t-1;0<=p;--p)b[p+f+1]=this[p]>>d|h,h=(this[p]&e)<<c;for(p=f-1;0<=p;--p)b[p]=0;b[f]=h;b.t=this.t+f+1;b.s=this.s;b.clamp()}
function bnpRShiftTo(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=0;else{var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var h=c+1;h<this.t;++h)b[h-c-1]|=(this[h]&f)<<e,b[h-c]=this[h]>>d;0<d&&(b[this.t-c-1]|=(this.s&f)<<e);b.t=this.t-c;b.clamp()}}
function bnpSubTo(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0;-1>d?b[c++]=this.DV+d:0<d&&(b[c++]=d);b.t=c;b.clamp()}
function bnpMultiplyTo(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;0<=--e;)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0;b.clamp();this.s!=a.s&&BigInteger.ZERO.subTo(b,b)}function bnpSquareTo(a){for(var b=this.abs(),c=a.t=2*b.t;0<=--c;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}0<a.t&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1));a.s=0;a.clamp()}
function bnpDivRemTo(a,b,c){var d=a.abs();if(!(0>=d.t)){var e=this.abs();if(e.t<d.t)null!=b&&b.fromInt(0),null!=c&&this.copyTo(c);else{null==c&&(c=nbi());var f=nbi(),h=this.s;a=a.s;var p=this.DB-nbits(d[d.t-1]);0<p?(d.lShiftTo(p,f),e.lShiftTo(p,c)):(d.copyTo(f),e.copyTo(c));d=f.t;e=f[d-1];if(0!=e){var q=e*(1<<this.F1)+(1<d?f[d-2]>>this.F2:0),g=this.FV/q,q=(1<<this.F1)/q,u=1<<this.F2,v=c.t,x=v-d,r=null==b?nbi():b;f.dlShiftTo(x,r);0<=c.compareTo(r)&&(c[c.t++]=1,c.subTo(r,c));BigInteger.ONE.dlShiftTo(d,
r);for(r.subTo(f,f);f.t<d;)f[f.t++]=0;for(;0<=--x;){var w=c[--v]==e?this.DM:Math.floor(c[v]*g+(c[v-1]+u)*q);if((c[v]+=f.am(0,w,c,x,0,d))<w)for(f.dlShiftTo(x,r),c.subTo(r,c);c[v]<--w;)c.subTo(r,c)}null!=b&&(c.drShiftTo(d,b),h!=a&&BigInteger.ZERO.subTo(b,b));c.t=d;c.clamp();0<p&&c.rShiftTo(p,c);0>h&&BigInteger.ZERO.subTo(c,c)}}}}function bnMod(a){var b=nbi();this.abs().divRemTo(a,null,b);0>this.s&&0<b.compareTo(BigInteger.ZERO)&&a.subTo(b,b);return b}function Classic(a){this.m=a}
function cConvert(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a}function cRevert(a){return a}function cReduce(a){a.divRemTo(this.m,null,a)}function cMulTo(a,b,c){a.multiplyTo(b,c);this.reduce(c)}function cSqrTo(a,b){a.squareTo(b);this.reduce(b)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;
function bnpInvDigit(){if(1>this.t)return 0;var a=this[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b}function Montgomery(a){this.m=a;this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}
function montConvert(a){var b=nbi();a.abs().dlShiftTo(this.m.t,b);b.divRemTo(this.m,null,b);0>a.s&&0<b.compareTo(BigInteger.ZERO)&&this.m.subTo(b,b);return b}function montRevert(a){var b=nbi();a.copyTo(b);this.reduce(b);return b}
function montReduce(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a[b]&32767,d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM,c=b+this.m.t;for(a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)}function montSqrTo(a,b){a.squareTo(b);this.reduce(b)}function montMulTo(a,b,c){a.multiplyTo(b,c);this.reduce(c)}Montgomery.prototype.convert=montConvert;
Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return 0==(0<this.t?this[0]&1:this.s)}function bnpExp(a,b){if(4294967295<a||1>a)return BigInteger.ONE;var c=nbi(),d=nbi(),e=b.convert(this),f=nbits(a)-1;for(e.copyTo(c);0<=--f;)if(b.sqrTo(c,d),0<(a&1<<f))b.mulTo(d,e,c);else var h=c,c=d,d=h;return b.revert(c)}
function bnModPowInt(a,b){var c;c=256>a||b.isEven()?new Classic(b):new Montgomery(b);return this.exp(a,c)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;
BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;
BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function Arcfour(){this.j=this.i=0;this.S=[]}function ARC4init(a){var b,c,d;for(b=0;256>b;++b)this.S[b]=b;for(b=c=0;256>b;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.j=this.i=0}function ARC4next(){var a;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;a=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=a;return this.S[a+this.S[this.i]&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;
function prng_newstate(){return new Arcfour}var rng_psize=256;var rng_state,rng_pool,rng_pptr;function rng_seed_int(a){rng_pool[rng_pptr++]^=a&255;rng_pool[rng_pptr++]^=a>>8&255;rng_pool[rng_pptr++]^=a>>16&255;rng_pool[rng_pptr++]^=a>>24&255;rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}
if(null==rng_pool){rng_pool=[];rng_pptr=0;var t;if("Netscape"==navigator.appName&&"5">navigator.appVersion&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=z.charCodeAt(t)&255}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=t&255;rng_pptr=0;rng_seed_time()}
function rng_get_byte(){if(null==rng_state){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(a){var b;for(b=0;b<a.length;++b)a[b]=rng_get_byte()}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function parseBigInt(a,b){return new BigInteger(a,b)}function linebrk(a,b){for(var c="",d=0;d+b<a.length;)c+=a.substring(d,d+b)+"\n",d+=b;return c+a.substring(d,a.length)}function byte2Hex(a){return 16>a?"0"+a.toString(16):a.toString(16)}
function pkcs1pad2(a,b){if(b<a.length+11)return alert("Message too long for RSA"),null;for(var c=[],d=a.length-1;0<=d&&0<b;)c[--b]=a.charCodeAt(d--);c[--b]=0;for(var d=new SecureRandom,e=[];2<b;){for(e[0]=0;0==e[0];)d.nextBytes(e);c[--b]=e[0]}c[--b]=2;c[--b]=0;return new BigInteger(c)}function RSAKey(){this.n=null;this.e=0;this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}
function RSASetPublic(a,b){null!=a&&null!=b&&0<a.length&&0<b.length?(this.n=parseBigInt(a,16),this.e=parseInt(b,16)):alert("Invalid RSA public key")}function RSADoPublic(a){return a.modPowInt(this.e,this.n)}function RSAEncrypt(a){a=pkcs1pad2(a,this.n.bitLength()+7>>3);if(null==a)return null;a=this.doPublic(a);if(null==a)return null;a=a.toString(16);return 0==(a.length&1)?a:"0"+a}RSAKey.prototype.doPublic=RSADoPublic;RSAKey.prototype.setPublic=RSASetPublic;RSAKey.prototype.encrypt=RSAEncrypt;var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",c,d,e,f,h,p,q=0;for(a=Base64._utf8_encode(a);q<a.length;)c=a.charCodeAt(q++),d=a.charCodeAt(q++),e=a.charCodeAt(q++),f=c>>2,c=(c&3)<<4|d>>4,h=(d&15)<<2|e>>6,p=e&63,isNaN(d)?h=p=64:isNaN(e)&&(p=64),b=b+this._keyStr.charAt(f)+this._keyStr.charAt(c)+this._keyStr.charAt(h)+this._keyStr.charAt(p);return b},decode:function(a){var b="",c,d,e,f,h,p=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<
a.length;)c=this._keyStr.indexOf(a.charAt(p++)),d=this._keyStr.indexOf(a.charAt(p++)),f=this._keyStr.indexOf(a.charAt(p++)),h=this._keyStr.indexOf(a.charAt(p++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|h,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=h&&(b+=String.fromCharCode(e));return b=Base64._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>
6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return b}};var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;a&&b.mixIn(a);b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)});b.init.prototype=b;b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},
h=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||q).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-e%4*8&255)<<24-(d+e)%4*8;else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);this.sigBytes+=a;return this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-
c%4*8;b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);a.words=this.words.slice(0);return a},random:function(b){for(var c=[],d=0;d<b;d+=4)c.push(4294967296*a.random()|0);return new h.init(c,b)}}),p=c.enc={},q=p.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push((e>>>4).toString(16));c.push((e&15).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<
24-d%8*4;return new h.init(c,b/2)}},g=p.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-d%4*8&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(a.charCodeAt(d)&255)<<24-d%4*8;return new h.init(c,b)}},u=p.Utf8={stringify:function(a){try{return decodeURIComponent(escape(g.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return g.parse(unescape(encodeURIComponent(a)))}},
v=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new h.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=u.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,g=e/(4*f),g=b?a.ceil(g):a.max((g|0)-this._minBufferSize,0);b=g*f;e=a.min(4*b,e);if(b){for(var p=0;p<b;p+=f)this._doProcessBlock(d,p);p=d.splice(0,b);c.sigBytes-=e}return new h.init(p,e)},clone:function(){var a=f.clone.call(this);
a._data=this._data.clone();return a},_minBufferSize:0});d.Hasher=v.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){v.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return(new a.init(c)).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return(new x.HMAC.init(a,
c)).finalize(b)}}});var x=c.algo={};return c}(Math);
(function(a){function b(a,b,c,d,e,f,g){a=a+(b&c|~b&d)+e+g;return(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){a=a+(b&d|c&~d)+e+g;return(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){a=a+(b^c^d)+e+g;return(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){a=a+(c^(b|~d))+e+g;return(a<<f|a>>>32-f)+b}for(var f=CryptoJS,h=f.lib,p=h.WordArray,q=h.Hasher,h=f.algo,g=[],u=0;64>u;u++)g[u]=4294967296*a.abs(a.sin(u+1))|0;h=h.MD5=q.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},
_doProcessBlock:function(a,f){for(var h=0;16>h;h++){var p=f+h,q=a[p];a[p]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}var h=this._hash.words,p=a[f+0],q=a[f+1],u=a[f+2],y=a[f+3],A=a[f+4],B=a[f+5],C=a[f+6],D=a[f+7],E=a[f+8],F=a[f+9],G=a[f+10],H=a[f+11],I=a[f+12],J=a[f+13],K=a[f+14],L=a[f+15],k=h[0],l=h[1],m=h[2],n=h[3],k=b(k,l,m,n,p,7,g[0]),n=b(n,k,l,m,q,12,g[1]),m=b(m,n,k,l,u,17,g[2]),l=b(l,m,n,k,y,22,g[3]),k=b(k,l,m,n,A,7,g[4]),n=b(n,k,l,m,B,12,g[5]),m=b(m,n,k,l,C,17,g[6]),l=b(l,m,n,k,D,22,g[7]),
k=b(k,l,m,n,E,7,g[8]),n=b(n,k,l,m,F,12,g[9]),m=b(m,n,k,l,G,17,g[10]),l=b(l,m,n,k,H,22,g[11]),k=b(k,l,m,n,I,7,g[12]),n=b(n,k,l,m,J,12,g[13]),m=b(m,n,k,l,K,17,g[14]),l=b(l,m,n,k,L,22,g[15]),k=c(k,l,m,n,q,5,g[16]),n=c(n,k,l,m,C,9,g[17]),m=c(m,n,k,l,H,14,g[18]),l=c(l,m,n,k,p,20,g[19]),k=c(k,l,m,n,B,5,g[20]),n=c(n,k,l,m,G,9,g[21]),m=c(m,n,k,l,L,14,g[22]),l=c(l,m,n,k,A,20,g[23]),k=c(k,l,m,n,F,5,g[24]),n=c(n,k,l,m,K,9,g[25]),m=c(m,n,k,l,y,14,g[26]),l=c(l,m,n,k,E,20,g[27]),k=c(k,l,m,n,J,5,g[28]),n=c(n,k,
l,m,u,9,g[29]),m=c(m,n,k,l,D,14,g[30]),l=c(l,m,n,k,I,20,g[31]),k=d(k,l,m,n,B,4,g[32]),n=d(n,k,l,m,E,11,g[33]),m=d(m,n,k,l,H,16,g[34]),l=d(l,m,n,k,K,23,g[35]),k=d(k,l,m,n,q,4,g[36]),n=d(n,k,l,m,A,11,g[37]),m=d(m,n,k,l,D,16,g[38]),l=d(l,m,n,k,G,23,g[39]),k=d(k,l,m,n,J,4,g[40]),n=d(n,k,l,m,p,11,g[41]),m=d(m,n,k,l,y,16,g[42]),l=d(l,m,n,k,C,23,g[43]),k=d(k,l,m,n,F,4,g[44]),n=d(n,k,l,m,I,11,g[45]),m=d(m,n,k,l,L,16,g[46]),l=d(l,m,n,k,u,23,g[47]),k=e(k,l,m,n,p,6,g[48]),n=e(n,k,l,m,D,10,g[49]),m=e(m,n,k,l,
K,15,g[50]),l=e(l,m,n,k,B,21,g[51]),k=e(k,l,m,n,I,6,g[52]),n=e(n,k,l,m,y,10,g[53]),m=e(m,n,k,l,G,15,g[54]),l=e(l,m,n,k,q,21,g[55]),k=e(k,l,m,n,E,6,g[56]),n=e(n,k,l,m,L,10,g[57]),m=e(m,n,k,l,C,15,g[58]),l=e(l,m,n,k,J,21,g[59]),k=e(k,l,m,n,A,6,g[60]),n=e(n,k,l,m,H,10,g[61]),m=e(m,n,k,l,u,15,g[62]),l=e(l,m,n,k,F,21,g[63]);h[0]=h[0]+k|0;h[1]=h[1]+l|0;h[2]=h[2]+m|0;h[3]=h[3]+n|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/
4294967296);c[(e+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360;c[(e+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;b.sigBytes=4*(c.length+1);this._process();b=this._hash;c=b.words;for(d=0;4>d;d++)e=c[d],c[d]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;return b},clone:function(){var a=q.clone.call(this);a._hash=this._hash.clone();return a}});f.MD5=q._createHelper(h);f.HmacMD5=q._createHmacHelper(h)})(Math);
(function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],g=c[1],u=c[2],v=c[3],x=c[4],r=0;80>r;r++){if(16>r)e[r]=a[b+r]|0;else{var w=e[r-3]^e[r-8]^e[r-14]^e[r-16];e[r]=w<<1|w>>>31}w=(d<<5|d>>>27)+x+e[r];w=20>r?w+((g&u|~g&v)+1518500249):40>r?w+((g^u^v)+1859775393):60>r?w+((g&u|g&v|u&v)-1894007588):w+((g^u^
v)-899497514);x=v;v=u;u=g<<30|g>>>2;g=d;d=w}c[0]=c[0]+d|0;c[1]=c[1]+g|0;c[2]=c[2]+u|0;c[3]=c[3]+v|0;c[4]=c[4]+x|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32;b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296);b[(d+64>>>9<<4)+15]=c;a.sigBytes=4*b.length;this._process();return this._hash},clone:function(){var a=d.clone.call(this);a._hash=this._hash.clone();return a}});a.SHA1=d._createHelper(b);a.HmacSHA1=d._createHmacHelper(b)})();var g_headers={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Charset":"windows-1251,utf-8;q=0.7,*;q=0.3","Accept-Language":"ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4",Connection:"keep-alive",Origin:"https://i.bankuralsib.ru","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.106 Safari/537.36"},domain="i.bankuralsib.ru",baseurl="https://"+domain+"/",g_mainpageurl;
function login(a){checkEmpty(a.login,"Введите логин!");checkEmpty(a.password,"Введите пароль!");AnyBalance.setOptions({DEFAULT_CHARSET:"utf-8",cookiePolicy:"netscape"});if(g_mainpageurl)AnyBalance.trace("Должны быть уже залогинены, пытаемся войти");else{var b=AnyBalance.requestGet(baseurl,g_headers),b=handleBobcmn(AnyBalance.getLastUrl(),b),c=getAuthKey(b),d=getRsaN(b),e=getRsaE(b),f=a.password,h="",p=getP_instance(b);"undefined"!=typeof CryptoJS&&c&&(h=CryptoJS.MD5(f).toString(CryptoJS.enc.Hex).substr(0,
30),h=":"+CryptoJS.MD5(c+":"+h).toString(CryptoJS.enc.Hex));f=CryptoJS.SHA1(f).toString(CryptoJS.enc.Hex);f=CryptoJS.SHA1(c+":"+f).toString(CryptoJS.enc.Hex);if(d&&e&&void 0!=typeof RSAKey){var q=new RSAKey;q.setPublic(d,e);c=c+":"+q.encrypt(f+h).toLowerCase();d=f.length;f="";for(e=0;e<d;e++)f+="*"}b=AnyBalance.requestPost(baseurl+"wwv_flow.show",{p_request:"APPLICATION_PROCESS=AUTHENTICATE",p_flow_id:getFlowID(b),p_flow_step_id:getFlowStepID(b),p_instance:p,x01:"AUTH#PASSWORD",x02:a.login,x03:f,
x04:c,x05:"N",x06:"4"},addHeaders({Referer:baseurl}));if(!/Авторизация успешна/i.test(b)){if(a=sumParam(b,null,null,/"err"[^"]+"([^"]+)/ig,replaceTagsAndSpaces,null,aggregate_join))throw new AnyBalance.Error(a,null,/Неверный логин или пароль|неверно указано имя входа/i.test(a));if(/истёк срок действия пароля/i.test(b))throw new AnyBalance.Error("Истёк срок действия пароля. Смените пароль через браузер, а затем введите его в настройки провайдера.",null,!0);AnyBalance.trace(b);throw new AnyBalance.Error("Не удалось зайти в личный кабинет. Сайт изменен?");
}b=getParam(b,null,null,/afterLogin\(([^)]+)/i);if(!b)throw new AnyBalance.Error("Не удалось найти ссылку на страницу с данными, сайт изменен?");a=baseurl+"f?p=10:MAIN:"+b;b=AnyBalance.requestGet(a,g_headers);/Необходимо актуализировать e-mail/i.test(b)&&(AnyBalance.trace("Необходимо актуализировать e-mail, ок, сделаем..."),b=AnyBalance.requestPost(baseurl+"wwv_flow.show",{p_request:"APPLICATION_PROCESS=confirmEmail",x01:getParam(b,null,null,/"profile-email"[^>]*>([\s\S]*?)<\//i,replaceTagsAndSpaces),
x02:"null",x03:"#email-confirm-button",x04:"#profile-email",p_instance:getP_instance(b)||P_instance,p_flow_id:getFlowID(b)||FlowID,p_flow_step_id:getFlowStepID(b)||FlowStepID},addHeaders({Referer:a,"X-Requested-With":"XMLHttpRequest"})));renewDB(b);g_mainpageurl=a;__setLoginSuccessful()}return b=AnyBalance.requestGet(g_mainpageurl,g_headers)}
function renewDB(a){for(var b=getP_instance(a),c=getFlowID(a),d=getFlowStepID(a),e=AnyBalance.getLastUrl(),f=["AFTER_AUTH","APPLICATION_PROCESS=GET_MAIL_COUNT","APPLICATION_PROCESS=GET_CRM","APPLICATION_PROCESS=LoadPresale",""],h=0;h<f.length;h++)a=AnyBalance.requestPost(baseurl+"wwv_flow.show",{p_request:f[h],p_instance:getP_instance(a)||b,p_flow_id:getFlowID(a)||c,p_flow_step_id:getFlowStepID(a)||d},addHeaders({Referer:e,"X-Requested-With":"XMLHttpRequest"}))}
function processProfile(a,b){if(AnyBalance.isAvailable("info")){var c=getParam(a,null,null,/href="([^"]*PROFILE[^"]*)/i,replaceTagsAndSpaces);c?(a=AnyBalance.requestGet(baseurl+c,g_headers),a=AnyBalance.requestPost(baseurl+"wwv_flow.show",{p_request:"",p_instance:getP_instance(a),p_flow_id:getFlowID(a),p_flow_step_id:getFlowStepID(a),p_arg_names:"P"+getFlowStepID(a)+"_TAB_NAME",p_arg_values:"PERSONAL_INFO"},addHeaders({Referer:baseurl})),c={},getParam(a,c,"profile.name",/"profile-name with-icon"[^>]*>([\s\S]*?)<\/div/i,
replaceTagsAndSpaces),getParam(a,c,"profile.phone",/"profile-phone-mobile"[^>]*>([^<]+)/i,replaceTagsAndSpaces),getParam(a,c,"profile.mail",/"profile-email"[^>]*>([\s\S]*?)<\//i,replaceTagsAndSpaces),getParam(a,c,"profile.dateOfBirth",/"profile-birthday-date"[^>]*>([^<]+)/i,replaceTagsAndSpaces,parseDate),b.info=c):AnyBalance.trace("Не удалось найти ссылку на профиль пользователя")}}
function processCards(a,b){if(AnyBalance.isAvailable("cards")){a=AnyBalance.requestGet(baseurl+"f?p=10:CARDS:"+getP_instance(a)+"::NO:::",g_headers);var c=getElement(a,/<ul[^>]+products-list[^>]*card[^>]*>/i);if(c){c=c.replace(/(<li\b[^>]*>(?:(?!<(\/li|ul)\b[^>]*>)[\s\S])*?)(?=<(?:li|\/ul)\b[^>]*>)/ig,"$1</li>");c=getElements(c,/<li[^>]*>/ig);AnyBalance.trace("Найдено групп карт: "+c.length);b.cards=[];for(var d=0;d<c.length;++d){var e=getElements(c[d],/<div[^>]+class="desc"[^>]*>/ig);AnyBalance.trace("Найдено "+
e.length+" карт в группе");for(var f=0;f<e.length;++f){var h=getParam(e[f],null,null,/<h\d[^>]*>([\s\S]*?)<\/h\d>/i,replaceTagsAndSpaces),p=getParam(e[f],null,null,/\d{4}-x{4,8}-[-\dx]{4,16}/,replaceTagsAndSpaces),h={__id:getParam(e[f],null,null,/_ITEM_ID:([^:"]*)/i,replaceHtmlEntities),__name:h+" ("+p.substr(-4)+")",num:p};__shouldProcess("cards",h)&&processCard(e[f],e[0],h);b.cards.push(h)}}}else AnyBalance.trace("Не найден блок карт: "+a)}}
function processCard(a,b,c){getParam(b,c,"cards.balance",/"(?:sum|quant)"(?:[^>]*>){1}([^<]+)/i,replaceTagsAndSpaces,parseBalance);getParam(b,c,["cards.currency","cards.balance"],/"(?:sum|quant)"(?:[^>]*>){1}([^<]+)/i,replaceTagsAndSpaces,parseCurrencyAndMy);getParam(a,c,"cards.till",/\d{4}-x{4,8}-[-\dx]{4,16}[^<]*?(\d{1,2}\/\d{1,2})/i,[replaceTagsAndSpaces,/(.*)/i,"01/$1"],parseDate);getParam(a,c,"cards.type",/<h\d[^>]*>([\s\S]*?)<\/h\d>/i,replaceTagsAndSpaces);if((b=getParam(a,null,null,/href="(f\?p=[^"]+_ITEM_ID[^"]*)"/i))&&
isAvailable("cards.accnum cards.limit cards.blocked cards.minpay cards.total_debt cards.minpay cards.minpay cards.gracepay cards.minpay_till cards.gracepay_till".split(" "))){var d=AnyBalance.requestGet(baseurl+b,g_headers);getParam(d,c,"cards.limit",/Кредитный лимит(?:[\s\S]*?<td[^>]*>){1}([\s\S]*?)<\/td>/i,replaceTagsAndSpaces,parseBalance);getParam(d,c,"cards.blocked",/Заблокировано по операциям с картой(?:[\s\S]*?<td[^>]*>){1}([\s\S]*?)<\/td>/i,replaceTagsAndSpaces,parseBalance);getParam(d,c,
"cards.minpay",/cумма минимального платежа(?:[\s\S]*?<td[^>]*>){1}([\s\S]*?)<\/td>/i,replaceTagsAndSpaces,parseBalance);getParam(d,c,"cards.total_debt",/общая сумма задолженности(?:[\s\S]*?<td[^>]*>){1}([\s\S]*?)<\/td>/i,replaceTagsAndSpaces,parseBalance);getParam(d,c,"cards.gracepay",/для выполнения условий льготного периода кредитования(?:[\s\S]*?<td[^>]*>){1}([\s\S]*?)<\/td>/i,replaceTagsAndSpaces,parseBalance);var e=[replaceTagsAndSpaces,/[\s\S]*?(\d+\.\d+\.\d+$)/i,"$1"];getParam(d,c,"cards.minpay_till",
/cумма минимального платежа(?:[\s\S]*?<td[^>]*>){2}([\s\S]*?)<\/td>/i,e,parseDate);getParam(d,c,"cards.gracepay_till",/для выполнения условий льготного периода кредитования(?:[\s\S]*?<td[^>]*>){2}([\s\S]*?)<\/td>/i,e,parseDate);e=getElement(d,/<ul[^>]+bills[^>]*>/i);sumParam(e,c,"cards.accnum",/<div[^>]+class="info"[^>]*>([\s\S]*?)<\/div>/ig,replaceTagsAndSpaces,null,aggregate_join)}else AnyBalance.trace("Не нашли ссылку на дополнительную информацию по счетам, возможно, сайт изменился?");AnyBalance.isAvailable("cards.transactions")&&
processCardTransactions(a,d,baseurl+b,c)}
function processAccounts(a,b){if(AnyBalance.isAvailable("accounts")){var c=getElements(a,/<div[^>]+class="product-item type-account"/ig);AnyBalance.trace("Найдено счетов: "+c.length);b.accounts=[];for(var d=0;d<c.length;++d){var e=getParam(c[d],null,null,/acc_id\s*=\s*"([^"]+)/i),f=getParam(c[d],null,null,/<div[^>]+class="info"[^>]*>\s*(\d{20})/i,replaceTagsAndSpaces),e={__id:e,__name:f};__shouldProcess("accounts",e)&&processAccount(c[d],e);b.accounts.push(e)}}}
function processAccount(a,b){getParam(a,b,"accounts.total",/class="quant"[^>]*>([^<]+)/i,replaceTagsAndSpaces,parseBalance);getParam(a,b,["accounts.currency","accounts.balance","accounts.total","accounts.blocked"],/class="quant"[^>]*>([^<]+)/i,replaceTagsAndSpaces,parseCurrency);getParam(a,b,"accounts.accnum",/<div[^>]+class="info"[^>]*>\s*(\d{20})/i,replaceTagsAndSpaces);getParam(a,b,"accounts.acctype",/ITEM_ID[^>]*>([^<]+)/i,replaceTagsAndSpaces);var c=getParam(a,null,null,/href="(f\?p=[^"]+)"/i);
if(c){var d=AnyBalance.requestGet(baseurl+c,g_headers),e=getJsonObject(d,/var\s+item_data\s*=\s*/i);e?(getParam(e.blocked,b,"accounts.blocked",null,null,parseBalance),getParam(e.avail,b,"accounts.balance",null,null,parseBalance)):AnyBalance.trace("Информация о балансе счета не найдена: "+d)}else AnyBalance.trace("Не нашли ссылку на дополнительную информацию по счетам, возможно, сайт изменился?");AnyBalance.isAvailable("accounts.transactions")&&processAccountTransactions(a,d,baseurl+c,b)}
function parseCurrencyAndMy(a){return parseCurrencyMy(parseCurrency(a))}function parseCurrencyMy(a){var b={"Российский рубль":"руб","Доллар США":"$","Евро":"€"};return b[a]?b[a]:a}function getAuthKey(a){return nvl(getParam(a,null,null,/value="([^"]+)[^<]*id="authkey"/i),"").substr(0,32).toLowerCase()}function getP_instance(a){return getParam(a,null,null,/p_instance[^>]*value=['"]([^'"]+)/i)}function getFlowID(a){return getParam(a,null,null,/value="([^"]+)[^<]*pFlowId/i)}
function getFlowStepID(a){return getParam(a,null,null,/p_flow_step_id[^>]*value="([^"]+)/i)}function nvl(a,b,c,d){return void 0!=a&&null!=a?(void 0!=c&&null!=c?c:"")+a+(void 0!=d&&null!=d?d:""):void 0!=b&&null!=b?b:""}function getRsaN(a){return getParam(a,null,null,/rsa_N\s*=\s*['"]([^'"]+)/i)}function getRsaE(a){return getParam(a,null,null,/rsa_E\s*=\s*['"]([^'"]+)/i)};
