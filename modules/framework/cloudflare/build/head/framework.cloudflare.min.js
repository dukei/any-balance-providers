function Cloudflare(h){function p(a){a=sumParam(a,/(\w+\s*=\s*(["'])[^'"]*\2)/g);for(var c={},b=0;b<a.length;++b){var d=/(\w+)\s*=\s*["']([^'"]*)/.exec(a[b]);c[d[1]]=html_entity_decode(d[2])}return c}function m(a,c,b){function d(a,b){if(!/^https?:/i.test(b)){var c=h;/^\//.test(b)&&(c=n(a));b=(c+"/"+b).replace(/([^:])\/{2,}/g,"$1/")}return b}var e=b||[],g;b={set src(b){/img/i.test(a)?r.push(n()+b):f.trace("Can not set src of "+a+" to "+b)},set innerHTML(b){var c=/^<(\w+)\s*([^>]*)>([^<]*)<\/\1>$/.exec(b);
if(!c)throw new f.Error("Creation of too complex innerHTML is not implemented: "+b);b=p(c[2]);e.push(new m(a,b))},get firstChild(){return e[0]},set href(b){g=d(h,b)},get href(){return g},submit:function(){for(var b=[],a=0;a<e.length;++a)b.push([e[a].name,e[a].value]);a=this.method||"get";this.action=this.action.replace("undefined","");/get/i.test(a)?k._lastHtml=f.requestGet(d(h,this.action)+"?"+createUrlEncodedParams(b),q):k._lastHtml=f.requestPost(d(h,this.action),b,q)}};for(var l in c)b[l]=c[l];
return b}function n(a){return getParam(a||h,/^(https?:\/\/[^\/]*)/i)}var f=AnyBalance,q=addHeaders(g_headers,{Referer:h}),r=[],l={},g={location:function(){return{href:h,reload:function(){if(g.onunload)g.onunload()}}}(),document:k},k={get cookie(){var a=f.getCookies(),c=getParam(h,/^https?:\/\/([^\/]*)/i);return a.reduce(function(a,d){endsWith(d.domain,c)&&(a&&(a+=";"),a+=d.name+"="+d.value);return a},"")},set cookie(a){var c=getParam(a,/\bpath=([^;]*)/i),b=getParam(a,/\bdomain=([^;]*)/i)||getParam(h,
/^https?:\/\/([^\/]*)/i);a=getParam(a,/^[^;]*/).match(/([^=]*)=(.*)/);f.setCookie(b,a[1],a[2],{path:c})},createElement:function(a){return m(a)},getElementById:function(a){return l[a]},window:g};g.parent=g;9<=f.getLevel()&&f.restoreCookies();return{document:k,window:g,isCloudflared:function(a){return/<input[^>]+name="jschl_vc"[^>]*value="([^"]*)/i.test(a)||/<form[^>]+chk_captcha/i.test(a)},executeScript:function(a){if(/<form[^>]+chk_captcha/i.test(a)){var c=a;AnyBalance.trace("Cloudflare потребовало reCaptcha");
a=getParam(c,/data-ray="([^"]*)/i,replaceHtmlEntities);var b=getParam(c,/data-sitekey="([^"]*)/i,replaceHtmlEntities);if(!a||!b)throw AnyBalance.trace(c),new AnyBalance.Error("Не удалось найти параметры Cloudflare для ввода капчи");c=solveRecaptcha("Вы заходите из небезопасного расположения. Cloudflare требует доказать, что вы не робот.","https://cloudflare.com/",b);b=n();a=c=AnyBalance.requestGet(b+"/cdn-cgi/l/chk_captcha?"+createUrlEncodedParams({id:a,"g-recaptcha-response":c}),addHeaders({Referer:h}))}else{c=
a;AnyBalance.trace("Пытаемся пройти автоматизированную проверку браузера Cloudflare");a=[g,k,g.location,g];for(var b=sumParam(getElement(c,/<form[^>]+challenge-form/i),/<input[^>]*>/ig),d=[],e=0;e<b.length;++e)d.push(new m("input",p(b[e])));l={"challenge-form":new m("form",{action:"/cdn-cgi/l/chk_jschl"},d)};for(e=0;e<d.length;++e)d[e].id&&(l[d[e].id]=d[e]);b=/setTimeout\(function\(\)\{([\s\S]*?)\},\s*(\d+)\)/.exec(c);if(!b)throw f.trace(c),new f.Error("Не удалось найти скрипт Cloudflare для выполнения");
c=b[1];f.sleep(+b[2]);safeEval(c,"window,document,location,parent",a);a=k._lastHtml}9<=f.getLevel()&&(f.saveCookies(),f.saveData());return a}}};
