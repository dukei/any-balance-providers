function loginMailRu(b,d,a){a||(a="https://mail.ru");var c=b.match(/([\w-\.]+)@((?:[\w]+\.)+[a-zA-Z]{2,4})$/i);if(!c)throw new AnyBalance.Error("Неправильный е-мейл для входа на mail.ru.",null,!0);AnyBalance.setDefaultCharset("utf-8");b=AnyBalance.requestPost("https://auth.mail.ru/cgi-bin/auth?lang=ru_RU&from=authpopup",{page:a,FailPage:"",Login:b,Domain:c[2].toLowerCase(),Password:d,new_auth_form:1});if(0!=AnyBalance.getLastUrl().indexOf(a)){if(a=getParam(b,null,null,/<div[^>]+login-page__external_error[^>]*>([\s\S]*?)<\/div>/i,
replaceTagsAndSpaces))throw new AnyBalance.Error(a,null,/Неверное имя пользователя или пароль/i.test(a));if(/passremind/i.test(AnyBalance.getLastUrl()))throw new AnyBalance.Error("Ящик временно заблокирован. Mail.ru требует подтвердить e-mail по SMS. Войдите в вашу почту через браузер и подтвердите.");AnyBalance.trace(b);throw new AnyBalance.Error("Не удалось войти в личный кабинет. Неправильный логин-пароль?");}return b};
