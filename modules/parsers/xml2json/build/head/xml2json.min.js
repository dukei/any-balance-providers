function Xml2Json(){function h(f){var c=new EasySAXParser,g={},d=[{name:null,value:g}];c.on("error",function(a){AnyBalance.trace(a)});c.on("startNode",function(a,b,k,e,c){d.push({name:a,value:null})});c.on("endNode",function(a,b,c,e){a=d[d.length-1];b=d[d.length-2];if(!b.value||"string"==typeof b.value&&!b.value.trim())b.value={};b.value.hasOwnProperty(a.name)?"object"!=typeof b.value[a.name]?(AnyBalance.trace("Overwriting text node ("+a.name+"): "+b.value[a.name]),b.value[a.name]=a.value):isArray(b.value[a.name])?
b.value[a.name].push(a.value):b.value[a.name]=[b.value[a.name],a.value]:b.value[a.name]=a.value;d.pop()});c.on("textNode",function(a,b){var c=d[d.length-1],e=b(a);c.value&&e.trim()&&AnyBalance.trace("Overwriting value of tag "+c.name+" with text "+e);if(!c.value||e.trim())c.value=e});c.parse(f);return g}return{parse:function(f){return h(f)}}};
